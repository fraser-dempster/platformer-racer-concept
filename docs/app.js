!function(t){function e(e){for(var i,o,l=e[0],n=e[1],h=e[2],p=0,f=[];p<l.length;p++)o=l[p],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);for(c&&c(e);f.length;)f.shift()();return a.push.apply(a,h||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],i=!0,l=1;l<s.length;l++){var n=s[l];0!==r[n]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=s[0]))}return t}var i={},r={0:0},a=[];function o(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=t,o.c=i,o.d=function(t,e,s){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(s,i,function(e){return t[e]}.bind(null,i));return s},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var l=window.webpackJsonp=window.webpackJsonp||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var h=0;h<l.length;h++)e(l[h]);var c=n;a.push([7,1]),s()}({6:function(t,e){function s(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}s.keys=function(){return[]},s.resolve=s,t.exports=s,s.id=6},7:function(t,e,s){"use strict";s.r(e);var i=s(0),r=s.n(i),a=(s(2),0),o=0;class l extends r.a.Scene{constructor(t){super("PlayScene"),this.config=t,this.globalFlag=!1,this.controller=null,this.simplePeer=null,this.scanned=!1,this.platforms=null,this.platformHorizontalDistanceLeft=[60,266],this.platformHorizontalDistanceCentre=[266,532],this.platformHorizontalDistanceRight=[532,740],this.previousPlatform=0,this.playerList=[],this.player=null,this.player2=null,this.player3=null,this.player4=null,this.player5=null,this.gameEndCounter=0}preload(){this.load.image("sky","assets/sky.png"),this.load.image("ground","assets/platform.png"),this.load.spritesheet("dude","assets/dude.png",{frameWidth:32,frameHeight:48})}create(){this.createBG(),this.createPlatforms(),this.createStartingPlatform(),0==this.globalFlag&&(this.createCode(),this.globalFlag=!0),this.player=this.physics.add.sprite(400,300,"dude"),this.player2=this.physics.add.sprite(50,300,"dude"),this.player3=this.physics.add.sprite(100,300,"dude"),this.player4=this.physics.add.sprite(150,300,"dude"),this.player5=this.physics.add.sprite(300,300,"dude"),this.playerList.push(this.player),this.playerList.push(this.player2),this.playerList.push(this.player3),this.playerList.push(this.player4),this.playerList.push(this.player5),this.player.setTint(16711680),this.player2.setTint(7629488),this.player3.setTint(2657192),this.player4.setTint(16764464),this.player5.setTint(14911929);for(let t=0;t<this.playerList.length;t++)this.physics.add.collider(this.playerList[t],this.platforms),this.physics.add.collider(this.playerList[t],this.start);this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("dude",{start:0,end:3}),frameRate:10,repeat:-1}),this.anims.create({key:"turn",frames:[{key:"dude",frame:4}],frameRate:20}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("dude",{start:5,end:8}),frameRate:10,repeat:-1})}update(){if(this.checkCollision(),this.recyclePlatforms(),1==this.scanned){var t=this.simplePeer.controllerList,e=Object.keys(this.simplePeer.controllerList).length;for(let s=0;s<e;s++)this.movement(t[Object.keys(t)[s]],this.playerList[s])}}movement(t,e){1==t.buttons.right?(e.setVelocityX(160),console.log("right equals true"),e.anims.play("right",!0)):1==t.buttons.left?(e.body.velocity.x=-150,console.log("left equals true"),e.anims.play("left",!0)):(e.setVelocityX(0),e.anims.play("turn")),t.buttons.a&&e.body.touching.down&&e.setVelocityY(-400)}checkCollision(){for(let t=0;t<this.playerList.length;t++)this.playerList[t].getBounds().bottom>=this.config.height&&(this.playerList[t].destroy(),this.gameEndCounter++);5==this.gameEndCounter&&this.scene.stop()}createBG(){this.add.image(0,0,"sky").setOrigin(0,0)}createPlatforms(){this.platforms=this.physics.add.group();for(let t=0;t<20;t++){const t=this.platforms.create(0,0,"ground").setImmovable(!0).setScale(.5);t.body.setAllowGravity(!1),t.body.checkCollision.left=!1,t.body.checkCollision.right=!1,t.body.checkCollision.down=!1,t.body.checkCollision.top=!0,this.placePlatform(t)}this.platforms.setVelocityY(100)}createStartingPlatform(){this.start=this.physics.add.group();this.start.create(400,510,"ground").setScale(6).setImmovable(!0).refreshBody().body.setAllowGravity(!1),this.start.setVelocityY(10)}placePlatform(t){if(++o%15==0){const t=this.getHighestPlatform();a=-t}const e=a;this.incremementVertical();var s=0;if(r.a.Math.Between(this.platformHorizontalDistanceLeft[0],this.platformHorizontalDistanceLeft[1]),t.x<this.platformHorizontalDistanceLeft[1])s=r.a.Math.Between(this.platformHorizontalDistanceCentre[0],this.platformHorizontalDistanceRight[1]);else if(t.x>this.platformHorizontalDistanceRight[0])s=r.a.Math.Between(this.platformHorizontalDistanceLeft[0],this.platformHorizontalDistanceCentre[1]);else{s=Math.random()<.5?r.a.Math.Between(this.platformHorizontalDistanceLeft[0],this.platformHorizontalDistanceLeft[1]):r.a.Math.Between(this.platformHorizontalDistanceRight[0],this.platformHorizontalDistanceRight[1])}t.y=e,t.x=s}incremementVertical(){a-=70}getHighestPlatform(){let t=0;return this.platforms.getChildren().forEach((function(e){t=Math.max(e.y,t)})),t}recyclePlatforms(){const t=[];this.platforms.getChildren().forEach((e=>{e.getBounds().top>600&&(t.push(e),1===t.length&&this.placePlatform(...t))}))}createCode(){this.simplePeer=new smartcontroller.NesSmartController,this.simplePeer.createQrCode("https://emmapoliakova.github.io/webpack-test/nesController.html","qrcode",150,150,"1");var t=this;this.simplePeer.on("connection",(function(e){this.controller=e,t.scanned=!0}))}}var n=l;const h={width:800,height:600},c={type:r.a.AUTO,physics:{default:"arcade",arcade:{gravity:{y:500}}},scale:{parent:"qrcode",...h},scene:[new n(h)]};new r.a.Game(c)}});